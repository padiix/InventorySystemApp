<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="InventorySystem.Views.MainPage"
             xmlns:vm="clr-namespace:InventorySystem.ViewModels"
             Shell.TabBarIsVisible="True"
             Title="{Binding Title}">
    
    <ContentPage.BindingContext>
        <vm:MainPageViewModel />
    </ContentPage.BindingContext>
    
    <ContentPage.Resources>
        <ResourceDictionary>
            
            <Color x:Key="Accent">LightGray</Color>

        </ResourceDictionary>
    </ContentPage.Resources>
    
    <ContentPage.ToolbarItems>
        
        <ToolbarItem Text="Account"
                     Clicked="Account_OnClicked"/>

        <ToolbarItem Text="Log out" 
                     Clicked="Logout_OnClicked"/>

    </ContentPage.ToolbarItems>

    <Grid>
        <Grid.RowDefinitions>
            
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />

        </Grid.RowDefinitions>
        
        <StackLayout VerticalOptions="FillAndExpand" 
                     HorizontalOptions="Center" 
                     Padding="0,30,0,30">
            
            <Label Text="{Binding WelcomeMessage}" 
                   FontSize="Title"/>

        </StackLayout>
        
        <StackLayout Grid.Row="1" 
                     Padding="20,15">
            <Label Padding="10,0,0,5"
                   Text="Ostatnio zmodyfikowane przedmioty:"
                   FontSize="18"/>

            <SearchBar Scale="0.9"
                       Placeholder="Nazwa przedmiotu"
                       TextChanged="SearchBar_OnTextChanged"/>
            

            <CollectionView ItemsSource="{Binding UserItems}"
                            BackgroundColor="GhostWhite"> 
                
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <StackLayout Padding="10">

                            <Label Text="{Binding Name}"
                                   TextColor="Black"
                                   HorizontalTextAlignment="Center"
                                   TextTransform="Uppercase"
                                   FontSize="Title"/>

                            <FlexLayout AlignItems="Center">
                                <Label Text="Barcode:  "
                                       FontSize="Subtitle"/>
                                <Label Text ="{Binding Barcode}"
                                       FontSize="18"/>
                            </FlexLayout>

                            <FlexLayout AlignItems="Center">
                                <Label Text="Last modification:  "
                                       FontSize="Subtitle"/>
                                <Label Text="{Binding DateAdded}"
                                       FontSize="18"/>
                            </FlexLayout>

                            <FlexLayout AlignItems="Center">
                                <Label Text="Modified by:"
                                       FontSize="Subtitle"/>
                                <Label Padding="4,0,0,0"
                                   Text="{Binding User.FirstName}"
                                   FontSize="18"/>
                                <Label Padding="3,0,0,0"
                                   Text="{Binding User.LastName}"
                                   FontSize="18"/>
                            </FlexLayout>

                        </StackLayout>
                    </DataTemplate>
                </CollectionView.ItemTemplate>

            </CollectionView>

        </StackLayout>
    </Grid>

</ContentPage>
